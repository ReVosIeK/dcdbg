<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC Deck-Building Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>
    <div id="start-screen" class="screen active">
        <h1 class="game-title">DC Deck-Building Game</h1>
        <button id="play-button" class="btn" data-i18n-key="play">Graj</button>
    </div>
    <div id="pre-game-modal" class="screen">
        <h2 class="menu-title" data-i18n-key="how_to_play">Jak chcesz grać?</h2>

        <div id="pre-game-step-1" class="button-group">
            <button id="play-one-superhero-btn" class="btn" data-i18n-key="one_superhero">Jeden Superbohater</button>
            <button id="play-two-superheroes-btn" class="btn" data-i18n-key="two_superheroes">Dwóch Superbohaterów</button>
        </div>

        <div id="pre-game-step-2" class="hidden">
            <h3 class="menu-subtitle" data-i18n-key="choose_difficulty_level">Wybierz Poziom Trudności</h3>
            <div class="button-group">
                <button id="difficulty-easy-btn" class="btn" data-i18n-key="difficulty_easy" data-difficulty="easy">Łatwy</button>
                <button id="difficulty-medium-btn" class="btn" data-i18n-key="difficulty_medium" data-difficulty="medium">Średni</button>
                <button id="difficulty-hard-btn" class="btn" data-i18n-key="difficulty_hard" data-difficulty="hard">Trudny</button>
            </div>
        </div>

        <button id="back-to-main-menu-from-pre-game" class="btn btn-secondary" data-i18n-key="back_to_menu" style="margin-top: 25px;">Powrót</button>
    </div>
    <div id="main-menu-screen" class="screen">
        <h2 class="menu-title" data-i18n-key="main_menu">Menu Główne</h2>
        <div class="button-group">
            <button id="single-player-button" class="btn" data-i18n-key="single_player">Single Player</button>
            <button id="multiplayer-button" class="btn" data-i18n-key="multiplayer" disabled>Multiplayer</button>
        </div>
        <div class="button-group">
            <button id="controls-button" class="btn" data-i18n-key="controls_button">Ustawienia</button>
            <button id="settings-button" class="btn" data-i18n-key="settings">Sterowanie</button>
        </div>
    </div>
    <div id="settings-screen" class="screen">
        <h2 class="menu-title" data-i18n-key="settings">Ustawienia</h2>
        <div class="setting-item"><label for="language-select" data-i18n-key="language">Język:</label><select id="language-select"><option value="pl">Polski</option><option value="en">English</option></select></div>
        <div class="setting-item"><label for="ui-scale-slider" data-i18n-key="ui_scaling">Skalowanie interfejsu:</label><input type="range" id="ui-scale-slider" min="0.8" max="1.2" step="0.1" value="1"></div>
        <div class="setting-item">
            <label for="polish-descriptions-toggle" data-i18n-key="polish_descriptions_label">Polskie opisy kart:</label>
            <input type="checkbox" id="polish-descriptions-toggle">
        </div>
        <button id="back-to-menu-button" class="btn" data-i18n-key="back_to_menu">Powrót</button>
    </div>

    <div id="game-container" class="screen">
        <div id="help-bar-container">
            <button id="how-to-play-button" data-i18n-key="how_to_play_tooltip" data-i18n-target="title" title="Jak Grać?">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5ZM12,9.5A1.25,1.25,0,1,0,10.75,8.25,1.25,1.25,0,0,0,12,9.5Z"/></svg>
            </button>
            <button id="controls-ingame-button" data-i18n-key="controls_tooltip_ingame" data-i18n-target="title" title="Sterowanie">
                <svg id="Layer_1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m23 17.704c-.132-.428-.46-2.444-3-2.68v-.024c0-.552-.448-1-1-1s-1 .448-1 1h-2c0-.552-.448-1-1-1s-1 .448-1 1v.024c-2.54.236-2.868 2.252-3 2.68-.746 2.424-1 4.455-1 5.058 0 .683.556 1.238 1.238 1.238.951 0 2.531-1.442 3.456-2.793.52-.76 1.385-1.207 2.306-1.207s1.786.447 2.306 1.207c.924 1.351 2.505 2.793 3.456 2.793.683 0 1.238-.556 1.238-1.238 0-.603-.253-2.635-1-5.058zm-14.682 2.506c-.782-.351-1.513-.808-2.166-1.367l-.445.257s-.002.001-.003.002c-1.436.827-3.27.334-4.097-1.102-.825-1.435-.334-3.267 1.098-4.098l.444-.256c-.2-1.088-.2-2.202 0-3.29l-.444-.256c-1.436-.828-1.928-2.664-1.1-4.1s2.664-1.928 4.1-1.1l.447.259c.84-.719 1.805-1.277 2.848-1.646v-.513c0-1.657 1.343-3 3-3s3 1.343 3 3v.513c1.043.367 2.009.923 2.85 1.641l.445-.257c1.436-.828 3.272-.336 4.1 1.1s.336 3.272-1.1 4.1l-.444.256c.145.789.181 1.592.116 2.388-.527-.46-1.214-.741-1.967-.741-.768 0-1.469.29-2 .766-.292-.262-.639-.46-1.018-.592.147-2.261-1.729-4.182-3.982-4.174-2.209 0-4 1.791-4 4 0 1.415.739 2.652 1.848 3.363-.307.483-.573 1.053-.76 1.752-.35 1.137-.597 2.189-.77 3.095z"/></svg>
            </button>
        </div>

        <div id="game-board">
            <div id="ai-player-area" class="game-zone">
                <div id="ai-info-container">
                    <p id="ai-power-display">AI Power: <span id="ai-power-value">0</span></p>
                </div>
                <div id="ai-deck-container" class="deck-stack"></div>
                <div id="ai-discard-container" class="deck-stack"></div>
                <div id="ai-superhero-container"></div>
            </div>
            <div id="specials-container" class="nested-grid-container">
                <div id="main-deck-container" class="game-zone deck-stack" data-i18n-zone-key="main_deck_zone"></div>
                <div id="destroyed-pile-container" class="game-zone deck-stack" data-i18n-zone-key="destroyed_pile_zone" data-stack-name="destroyedPile"></div>
                <div id="locations-container" class="game-zone" data-i18n-zone-key="locations_zone"></div>
                <div id="discard-pile-container" class="game-zone deck-stack" data-i18n-zone-key="discard_pile_zone" data-stack-name="playerDiscard"></div>
                <div id="player-deck-container" class="game-zone deck-stack" data-i18n-zone-key="player_deck_zone"></div>
            </div>
            <div id="line-up-container" class="game-zone" data-i18n-zone-key="line_up_zone"></div>
            <div id="stacks-container" class="nested-grid-container">
                <div id="kick-stack-container" class="game-zone deck-stack" data-i18n-zone-key="kick_stack_zone"></div>
                <div id="super-villain-stack-container" class="game-zone deck-stack" data-i18n-zone-key="super_villain_stack_zone"></div>
                <div id="weakness-stack-container" class="game-zone deck-stack" data-i18n-zone-key="weakness_stack_zone"></div>
            </div>
            <div id="play-area-container" class="game-zone" data-i18n-zone-key="play_area_zone"><div id="play-area-wrapper"></div></div>
            <div id="player-hand-container" class="game-zone" data-i18n-zone-key="player_hand_zone"><div id="hand-cards-wrapper"></div></div>
            <div id="player-superhero-container" class="game-zone">
                <div id="superhero-card-area" data-i18n-zone-key="superhero_zone"></div>
                <div id="hud-container">
                    <p id="power-display"><span data-i18n-key="power_display">Moc:</span> <span id="power-value">0</span></p>
                    <button id="end-turn-button" class="btn" data-i18n-key="end_turn">Zakończ Turę</button>
                </div>
            </div>
            <div id="menu-bar-container">
                <button id="debug-toggle-button" class="hidden" data-i18n-key="debug_panel_tooltip" data-i18n-target="title" title="Panel Debugowania">
                    <svg id="Layer_1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m21.5 14.066v1.349c0 .996-.681 1.92-1.664 2.08-1.253.204-2.336-.758-2.336-1.973v-1.456c0-.489-.576-.744-.946-.424-.949.821-1.554 2.026-1.554 3.38 0 1.956 1.256 3.605 3 4.224v1.753c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1.753c1.744-.62 3-2.268 3-4.224 0-1.354-.604-2.56-1.554-3.38-.37-.32-.946-.065-.946.424zm-5.905 8.121c-1.082.512-2.294.812-3.594.813-3.074-.003-5.699-1.594-7.119-4h-.882c-1.105 0-2 .895-2 2v2c0 .552-.448 1-1 1s-1-.448-1-1v-2c0-2.209 1.791-4 4-4h.042c-.185-.686-.292-1.406-.293-2.157-.016-.534.093-1.282.264-1.843h-3.013c-.552 0-1-.448-1-1s.448-1 1-1h3.516l1.006-4h-1.522c-2.209 0-4-1.791-4-4v-2c0-.552.448-1 1-1s1 .448 1 1v2c0 1.105.895 2 2 2h2.08c.992-2.396 3.329-3.997 5.918-4 2.591.003 4.929 1.604 5.92 4h2.081c1.105 0 2-.895 2-2v-2c0-.552.447-1 1-1s1 .448 1 1v2c0 2.209-1.791 4-4 4h-1.523l.882 3.507c-3.524.075-6.36 2.95-6.36 6.493 0 2.122 1.021 4.001 2.595 5.187z"/></svg>
                </button>
                <button id="settings-ingame-button" data-i18n-key="settings_tooltip" data-i18n-target="title" title="Ustawienia">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M21,12a9.143,9.143,0,0,0-.15-1.645L23.893,8.6l-3-5.2L17.849,5.159A9,9,0,0,0,15,3.513V0H9V3.513A9,9,0,0,0,6.151,5.159L3.107,3.4l-3,5.2L3.15,10.355a9.1,9.1,0,0,0,0,3.29L.107,15.4l3,5.2,3.044-1.758A9,9,0,0,0,9,20.487V24h6V20.487a9,9,0,0,0,2.849-1.646L20.893,20.6l3-5.2L20.85,13.645A9.143,9.143,0,0,0,21,12Zm-6,0a3,3,0,1,1-3-3A3,3,0,0,1,15,12Z"/></svg>
                </button>
                <button id="log-toggle-button" data-i18n-key="log_panel_tooltip" data-i18n-target="title" title="Dziennik Zdarzeń">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M19,0H5C2.24,0,0,2.24,0,5v14c0,2.76,2.24,5,5,5h14c2.76,0,5-2.24,5-5V5c0-2.76-2.24-5-5-5ZM6,5h6c.55,0,1,.45,1,1s-.45,1-1,1H6c-.55,0-1-.45-1-1s.45-1,1-1Zm0,4H15c.55,0,1,.45,1,1s-.45,1-1,1H6c-.55,0-1-.45-1-1s.45-1,1-1Zm3,10h-3c-.55,0-1-.45-1-1s.45-1,1-1h3c.55,0,1,.45,1,1s-.45,1-1,1Zm9-4H6c-.55,0-1-.45-1-1s.45-1,1-1h12c.55,0,1,.45,1,1s-.45,1-1,1Z"/></svg>
                </button>
                <button id="reset-game-button" data-i18n-key="reset_game_tooltip" data-i18n-target="title" title="Resetuj Grę">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 511.494 511.494" style="enable-background:new 0 0 511.494 511.494;" xml:space="preserve" width="512" height="512"> <g> <path d="M478.291,255.492c-16.133,0.143-29.689,12.161-31.765,28.16c-15.37,105.014-112.961,177.685-217.975,162.315    S50.866,333.006,66.236,227.992S179.197,50.307,284.211,65.677c35.796,5.239,69.386,20.476,96.907,43.959l-24.107,24.107    c-8.33,8.332-8.328,21.84,0.004,30.17c4.015,4.014,9.465,6.262,15.142,6.246h97.835c11.782,0,21.333-9.551,21.333-21.333V50.991    c-0.003-11.782-9.556-21.331-21.338-21.329c-5.655,0.001-11.079,2.248-15.078,6.246l-28.416,28.416    C320.774-29.34,159.141-19.568,65.476,86.152S-18.415,353.505,87.304,447.17s267.353,83.892,361.017-21.828    c32.972-37.216,54.381-83.237,61.607-132.431c2.828-17.612-9.157-34.183-26.769-37.011    C481.549,255.641,479.922,255.505,478.291,255.492z"/> </g> </svg>
                </button>
                <button id="exit-game-button" data-i18n-key="exit_game_tooltip" data-i18n-target="title" title="Wyjdź do Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"> <path d="m23.473,16.247l-2.862,2.863-1.414-1.414,1.696-1.696h-6.892v-2h6.956l-1.76-1.761,1.414-1.414,2.862,2.862c.706.706.706,1.854,0,2.56Zm-9.473,1.753h2v5.999H0V4.199C0,2.775,1.014,1.538,2.411,1.258L8.412.057c.886-.174,1.793.051,2.491.622.428.351.728.812.908,1.319h1.19c1.654,0,3,1.346,3,3v7.001h-2v-7.001c0-.552-.449-1-1-1h-1v18h2v-3.999Zm-4.999-5.501c0-.829-.672-1.501-1.501-1.501s-1.501.672-1.501,1.501.672,1.501,1.501,1.501,1.501-.672,1.501-1.501Z"/> </svg>
                </button>
            </div>
        </div>

        <div id="turn-blocker" class="hidden"></div>

    </div>
    
    <div id="debug-panel" class="hidden">
        <button id="debug-close-button" class="close-button">&times;</button>
        <h3 data-i18n-key="debug_panel_title">Panel Debugowania</h3>
        <div class="debug-controls">
            <button id="debug-power-add" data-i18n-key="debug_add_power">Dodaj Moc</button>
            <button id="debug-power-remove" data-i18n-key="debug_remove_power">Odejmij Moc</button>
            <button id="debug-draw-card" data-i18n-key="debug_draw_card">Dobierz Kartę</button>
            <button id="debug-end-game" data-i18n-key="debug_force_end_game">Wymuś Koniec Gry</button>
        </div>
        <div class="debug-controls">
            <button id="debug-add-to-hand-btn" data-i18n-key="debug_add_to_hand">Dodaj do Ręki</button>
            <button id="debug-add-to-lineup-btn" data-i18n-key="debug_add_to_lineup">Dodaj do Line-Up</button>
            <button id="debug-destroy-card-btn" data-i18n-key="debug_destroy_card">Zniszcz Kartę</button>
        </div>
        <div class="debug-controls">
            <button id="debug-browse-stacks-btn" data-i18n-key="debug_browse_stacks">Przeglądaj Stosy</button>
            <button id="debug-set-special-btn" data-i18n-key="debug_set_special">Ustaw Karty Specjalne</button>
        </div>
        <div id="debug-selection-container" class="debug-controls"></div>
    </div>

    <div id="card-inspector-modal" class="hidden modal-overlay">
        <div class="modal-content inspector-content">
            <div id="inspector-description-panel" class="hidden">
                <h4 data-i18n-key="polish_ability_header">Zdolność (PL)</h4>
                <p id="inspector-description-text"></p>
            </div>
            <img src="" alt="Card Inspector" id="inspector-image">
            <button class="close-button">&times;</button>
        </div>
    </div>
    
    <div id="ingame-settings-modal" class="hidden modal-overlay">
        <div class="modal-content settings-modal">
            <button class="close-button">&times;</button>
            <h2 class="menu-title" data-i18n-key="settings">Ustawienia</h2>
            <div class="setting-item"><label for="language-select-ingame" data-i18n-key="language">Język:</label><select id="language-select-ingame"><option value="pl">Polski</option><option value="en">English</option></select></div>
            <div class="setting-item"><label for="ui-scale-slider-ingame" data-i18n-key="ui_scaling">Skalowanie interfejsu:</label><input type="range" id="ui-scale-slider-ingame" min="0.8" max="1.2" step="0.05" value="0.9"></div>
            <div class="setting-item">
                <label for="polish-descriptions-toggle-ingame" data-i18n-key="polish_descriptions_label">(Tylko PC) Polskie opisy kart:</label>
                <input type="checkbox" id="polish-descriptions-toggle-ingame">
            </div>
        </div>
    </div>

    <div id="confirmation-modal" class="hidden modal-overlay">
        <div class="modal-content confirmation-modal">
            <p id="confirmation-text" data-i18n-key="are_you_sure">Czy na pewno?</p>
            <div class="confirmation-buttons">
                <button id="confirm-yes-btn" class="btn" data-i18n-key="yes">Tak</button>
                <button id="confirm-no-btn" class="btn btn-secondary" data-i18n-key="no">Nie</button>
            </div>
        </div>
    </div>

    <div id="input-modal" class="hidden modal-overlay">
        <div class="modal-content confirmation-modal">
            <h3 id="input-modal-title" data-i18n-key="enter_value_title">Podaj wartość</h3>
            <div class="input-modal-body">
                <label id="input-modal-label" for="input-modal-input" data-i18n-key="value_label">Wartość:</label>
                <input type="number" id="input-modal-input" min="0" value="1">
            </div>
            <div class="confirmation-buttons">
                <button id="input-modal-ok" class="btn" data-i18n-key="ok_button">OK</button>
                <button id="input-modal-cancel" class="btn btn-secondary" data-i18n-key="cancel">Anuluj</button>
            </div>
        </div>
    </div>

    <div id="card-prompt-modal" class="hidden modal-overlay">
        <div class="modal-content choice-modal" style="width: auto;">
            <h3 id="card-prompt-title">Tytuł pytania</h3>
            <div id="card-prompt-area">
                <div id="card-prompt-card-area"></div>
                <p id="card-prompt-text">Dodatkowy tekst lub opis.</p>
            </div>
            <div id="card-prompt-buttons" class="choice-modal-buttons"></div>
        </div>
    </div>

    <div id="choice-modal" class="hidden modal-overlay">
        <div class="modal-content choice-modal">
            <h3 id="choice-modal-title" data-i18n-key="choose_card_title">Wybierz kartę:</h3>
            <div id="choice-modal-cards" class="card-list-container"></div>
            <div class="choice-modal-buttons">
                <button id="choice-modal-confirm" class="btn hidden" data-i18n-key="confirm">Zatwierdź</button>
                <button id="choice-modal-cancel" class="btn btn-secondary" data-i18n-key="cancel">Anuluj</button>
            </div>
        </div>
    </div>

    <div id="card-pool-modal" class="hidden modal-overlay">
        <div class="modal-content choice-modal">
            <h3 id="card-pool-title" data-i18n-key="card_pool_title">Wspólna pula kart</h3>
            <p id="card-pool-text">Instrukcja dla gracza.</p>
            <div id="card-pool-cards" class="card-list-container"></div>
            <div id="card-pool-buttons" class="choice-modal-buttons">
                </div>
        </div>
    </div>

    <div id="controls-modal" class="hidden modal-overlay">
        <div class="modal-content settings-modal"> <button class="close-button">&times;</button>
            <h2 class="menu-title" data-i18n-key="controls_modal_title">Sterowanie w Grze</h2>
            <div class="controls-list">
                <h3 data-i18n-key="controls_lmb_header">Lewy Przycisk Myszy (LPM)</h3>
                <p data-i18n-key="controls_lmb_desc"></p>

                <h3 data-i18n-key="controls_rmb_header">Prawy Przycisk Myszy (PPM)</h3>
                <p data-i18n-key="controls_rmb_desc"></p>

                <h3 data-i18n-key="controls_drag_header">Kliknięcie i Przeciągnięcie (LPM)</h3>
                <p data-i18n-key="controls_drag_desc"></p>
            </div>
        </div>
    </div>

    <div id="how-to-play-modal" class="hidden modal-overlay">
        <div class="modal-content settings-modal">
            <button class="close-button">&times;</button>
            <h2 class="menu-title" data-i18n-key="how_to_play_title">Jak Grać</h2>
            <div class="controls-list">
                <h3 data-i18n-key="htp_goal_header"></h3>
                <p data-i18n-key="htp_goal_text"></p>

                <h3 data-i18n-key="htp_turn_header"></h3>
                <p data-i18n-key="htp_turn_text"></p>

                <h3 data-i18n-key="htp_buy_header"></h3>
                <p data-i18n-key="htp_buy_text"></p>
            </div>
        </div>
    </div>

    <div id="game-log-panel" class="hidden">
        <div id="game-log-header">
            <h3 data-i18n-key="log_panel_title">Dziennik Zdarzeń</h3>
            <button id="log-close-button" class="close-button">&times;</button>
        </div>
        <div id="game-log-messages">
            </div>
    </div>
    
    <div id="card-tooltip" class="hidden"></div>

    <script src="i18n.js" defer></script>
    <script src="utils.js" type="module" defer></script>
    <script src="aiPlayer.js" type="module" defer></script>
    <script src="effects.js" defer></script>  
    <script src="card_effects/draw.js" defer></script>
    <script src="card_effects/conditional_power.js" defer></script>
    <script src="card_effects/conditional_effect.js" defer></script>
    <script src="card_effects/attack.js" defer></script>
    <script src="card_effects/on_play_effect.js" defer></script>
    <script src="card_effects/then_discard_card.js" defer></script>
    <script src="card_effects/end_of_turn.js" defer></script>
    <script src="card_effects/cleanup_effect.js" defer></script>
    <script src="card_effects/ongoing_triggered_ability.js" defer></script>
    <script src="card_effects/defense_reveal.js" defer></script>
    <script src="card_effects/defense_effect.js" defer></script>
    <script src="attackSystem.js" type="module" defer></script>
    <script src="script.js" type="module" defer></script>
    
</body>
</html>